define(["require","exports","module","vendor/typeahead","vendor/bloodhound","vendor/jquery/jquery-1.10.2","stamen-super-classy"],function(n,i,e){"use strict";var a,t,o,r=n("stamen-super-classy"),s=["cpadparkname","hipcampparkname","cpadSunma","activityCount","backpacking","biking","boating","caving","fishing","foraging","hiking","horsebackRiding","kayakingCanoeing","kiteboardingWindsurfing","ohv","climbing","snowSports","sup","stargazing","surfing","swimming","whitewaterRaftingKayaking","wildlifeWatching","wineBeerTasting","camping","other"];e.exports=function(n,i,e){function c(n){n?(t.addClass("pulse"),t.find("path").css({fill:"blue"})):(t.removeClass("pulse"),t.find("path").css({fill:"inherit"})),o.fire("loading",{show:n})}function u(){t.click(function(n){n.preventDefault(),navigator.geolocation?(c(!0),navigator.geolocation.getCurrentPosition(function(n){n.coords&&(c(!1),location.href="/parks/near/"+parseFloat(n.coords.latitude).toFixed(4)+","+parseFloat(n.coords.longitude).toFixed(4))},function(){c(!1)})):location.href="/parks/near"})}function d(){var n=function(n){return function(i,e){var a,t;a=[],t=new RegExp(i,"i"),$.each(n,function(n,i){t.test(i)&&a.push({value:i})}),e(a)}};a.find("input[type=search]").typeahead({hint:!0,highlight:!0,minLength:1,width:"100%"},{name:"states",displayKey:"value",source:n(s)}),a.find("input[type=search]").css("width","100%")}return o=this,r.apply(this,arguments),a=$(n),t=a.find(".locate-me"),o.on("ready",function(){e(null,o)}),u(),d(),o.fire("ready"),o}});